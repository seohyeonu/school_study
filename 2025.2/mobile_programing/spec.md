# Money Tree 앱 스펙 문서

버전: 0.9 (리소스 이름 매핑 반영)  
작성일: 2025-12-07  
플랫폼: Android (Kotlin/Java, 최소 SDK 버전은 프로젝트 상황에 따라 결정)

---

## 1. 앱 개요

Money Tree는 사용자의 월 수입, 고정 지출, 저축 목표를 기반으로 **하루에 사용 가능한 금액**을 계산해 주고, 실제 소비 내역을 기록·시각화하여 사용자가 자신의 소비 패턴을 쉽게 파악하도록 돕는 앱이다.

앱은 다음과 같은 핵심 기능을 제공한다.

1. 최초 실행 시 사용자 프로필 및 재무 목표 설정
2. 하루에 사용 가능한 금액, 현재 사용 가능한 금액 표시
3. 소비 내역(지출/수입) 등록
4. 달력 기반의 월간 수입/지출 요약 및 성과 표시(good / bad)
5. 특정 날짜의 상세 내역 조회

디자인은 제공된 PNG 리소스를 최대한 활용하며, 가능한 기본 버튼 대신 **이미지 버튼(ImageButton)** 과 커스텀 뷰를 사용한다.

---

## 2. 용어 정의

- **월 수입(Monthly Income)**: 한 달 동안 고정적으로 들어오는 수입 합계.

- **고정 지출(Fixed Expense)**: 한 달 동안 고정적으로 지출되는 비용 합계(예: 월세, 구독료).

- **한달 저축 목표(Saving Goal)**: 한 달에 저축하고자 하는 목표 금액.

- **하루에 사용 가능한 금액(Daily Allowance)**  

  - 공식:  
    ```
    dailyAllowance = (monthlyIncome - (fixedExpense + savingGoal)) / (해당 월의 실제 일수)
    ```
    *참고: 2월은 28/29일, 30일/31일인 달을 구분하여 정확히 나눈다.*

- **오늘 사용한 금액(Today Spent)**: 해당 날짜의 지출 내역 금액의 합.

- **현재 사용 가능한 금액(Current Allowance)**  

  - 공식:  

    ```
    currentAllowance = dailyAllowance - todaySpent
    ```
    *참고: 예산은 매일 리셋된다. (전날 남은 금액이 이월되지 않음)*

- **good/bad 상태** (캘린더 표시):

  - good: 오늘 사용한 금액 ≤ 하루에 사용 가능한 금액
  - bad: 오늘 사용한 금액 > 하루에 사용 가능한 금액

---

## 3. 주요 사용자 시나리오

### 시나리오 1: 최초 설정

1. 사용자가 앱을 처음 실행하면 **로고 화면(Logo)** 이 잠시 표시된다.
2. 로고 화면 이후 **시작 화면(Start1)** 이 나타난다.
3. 사용자는 이름, 고정 지출, 고정 수입(월 수입), 한달 저축 목표를 입력하고 `다음` 버튼을 누른다.
4. 입력 값이 유효하면(빈 값이 없고 숫자 필드는 숫자) 데이터가 저장되고 **홈 화면(Home)** 으로 이동한다.

### 시나리오 2: 홈 화면에서 오늘 소비 상태 확인

1. 홈 화면 상단에는  
   `"{사용자명}님은 {하루에 사용 가능한 금액}의 행복을 실천중입니다."` 문구가 표시된다.
2. 중앙 원형 카드에는 **현재 사용 가능한 금액**이 표시된다.
3. 그 아래에는 `사용한 금액 | {오늘 사용한 금액}` 이 표시된다.
4. 하단 네비게이션 영역에 세 개의 이미지 버튼이 항상 고정된다.
   - 소비내역 추가
   - 홈
   - 소비내역 보기(달력)
5. 홈 화면 우측 상단(또는 적절한 위치)에 **설정(톱니바퀴)** 버튼이 있어, 이를 통해 사용자 정보를 수정할 수 있다.

### 시나리오 3: 소비 내역 추가

1. 사용자가 하단 네비게이션의 `소비내역 추가` 버튼을 누르면 **내역 추가 화면(Insert)** 으로 이동한다.
2. 내역 추가 화면 상단에서 `지출` 또는 `수입` 탭을 선택할 수 있다. (기본은 `지출`)
3. 날짜, 금액(필수), 메모(선택) 등을 입력하고 `저장` 버튼을 누른다.
4. 저장 후:
   - DB에 해당 날짜의 트랜잭션 기록 추가
   - 오늘 날짜라면 홈 화면의 `오늘 사용한 금액`, `현재 사용 가능한 금액`이 재계산됨
   - 저장 성공 후 홈 화면으로 이동 또는 토스트 메시지 표시 (UX 설계에 따라 결정)

### 시나리오 4: 캘린더에서 월간 소비 확인

1. 사용자가 하단 네비게이션에서 `소비내역 보기` 버튼을 누르면 **캘린더 화면(Calendar)** 으로 이동한다.
2. 현재 월의 달력이 표시되고, 각 날짜마다 다음 정보가 표시된다.
   - 해당 날짜의 `수입 합계` / `지출 합계`
   - 해당 날짜의 good/bad 상태(텍스트 또는 색상/아이콘으로 표시)
3. 상단에는 현재 연도/월이 표시되고, 좌우 스와이프 또는 버튼으로 이전/다음 달로 이동할 수 있다.

### 시나리오 5: 특정 날짜 상세 내역 확인

1. 사용자가 캘린더에서 특정 날짜를 탭한다.
2. 해당 날짜의 **상세 화면(Detail)** 으로 이동한다.
3. 상세 화면에는:
   - 상단에 날짜
   - 상단 카드에 그날의 소비 목표 달성 여부 표시 (예: "이달 목표 하루 {dailyAllowance}원, {todaySpent}원 절약 성공!")
   - 아래 리스트에 해당 날짜의 모든 트랜잭션(지출/수입)이 시간순 또는 입력순으로 표시된다.

---

## 4. 화면/레이아웃 스펙

### 4.1 공통 요소

- 하단 네비게이션 바는 다음 세 개의 **이미지 버튼** 으로 구성된다.
  - 소비내역 조회(Calendar) 아이콘 → `bar_search.png`
  - 내역 추가(Add) 아이콘 → `bar_add.png`
  - 홈(Home) 아이콘 → `bar_home.png`
- 네비게이션 바는 각 화면(홈/캘린더/상세/내역추가)에서 **항상 동일한 위치와 크기**로 표시된다.
- 전체 테마 색상: 제공된 UI 이미지와 동일한 녹색 계열을 기본으로 한다.

공통 네비게이션 동작 규칙:

| 버튼          | 아이콘 리소스    | 동작                                                      |
| ------------- | ---------------- | --------------------------------------------------------- |
| 홈            | `bar_home.png`   | 홈 화면으로 이동 (현재 스택의 최상단이 홈이라면 재로딩 X) |
| 소비내역 추가 | `bar_add.png`    | 내역 추가 화면으로 이동                                   |
| 소비내역 보기 | `bar_search.png` | 캘린더 화면으로 이동                                      |

---

### 4.2 로고 화면 (Logo)

- 레이아웃 ID: `activity_splash.xml`
- 주요 요소:
  - 앱 로고 이미지: `iv_logo` (로고 PNG는 추후 파일명 확정 후 매핑)
- 동작:
  - 앱 실행 후 1.5~2초 동안 표시
  - 이후 자동으로 Start1 화면으로 이동
- 입력/출력: 없음

---

### 4.3 시작 화면 (Start1)

- 레이아웃 ID: `activity_onboarding.xml`
- 백그라운드:
  - 기본 흰색 배경 또는 추후 별도 온보딩 배경 추가 가능
- 주요 UI 요소:

| 요소               | 타입                    | ID                  | 설명                                        |
| ------------------ | ----------------------- | ------------------- | ------------------------------------------- |
| 안내 문구          | TextView                | `tv_welcome`        | "안녕하세요, 머니트리에 오신걸 환영합니다!" |
| 이름 입력          | EditText                | `et_name`           | 사용자 이름                                 |
| 고정 지출          | EditText (number)       | `et_fixed_expense`  | 월 고정 지출 금액                           |
| 고정 수입(월 수입) | EditText (number)       | `et_monthly_income` | 월 수입 금액                                |
| 한달 저축 목표     | EditText (number)       | `et_saving_goal`    | 한 달 저축 목표                             |
| 다음 버튼          | ImageButton 또는 Button | `btn_next`          | 제공된 디자인 이미지 사용                   |

- 검증 로직:
  - 필수 입력: 이름, 고정 지출, 월 수입, 한달 저축 목표
  - 금액 필드는 0 이상 정수만 허용 (필요 시 Long)
  - 유효하지 않은 경우 에러 메시지 및 포커스 이동

- 이동:
  - 성공 시:
    - SharedPreferences 또는 DB에 값 저장
    - Home Activity로 이동

---

### 4.4 홈 화면 (Home)

- 레이아웃 ID: `activity_home.xml`
- 배경:
  - 전체 배경으로 `background_main.png` 사용
- 주요 UI 요소:

| 요소                                 | 타입                          | ID                     | 설명                                                   |
| ------------------------------------ | ----------------------------- | ---------------------- | ------------------------------------------------------ |
| 상단 문구                            | TextView                      | `tv_daily_message`     | "{name}님은 {dailyAllowance}원의 행복을 실천중입니다." |
| 중앙 원형 카드 배경                  | ImageView                     | `iv_balance_circle_bg` | 상태에 따라 `main1.png` ~ `main4.png` 사용             |
| 감정 아이콘                          | ImageView                     | `iv_feel_icon`         | 상태에 따라 `feel1.png` ~ `feel4.png` 사용             |
| 현재 사용 가능 금액                  | TextView                      | `tv_current_allowance` | 예: "50,000원"                                         |
| 라벨 "사용한 금액 \| {todaySpent}원" | TextView                      | `tv_today_spent`       | 오늘 사용한 금액 표시                                  |
| 설정 버튼                            | ImageButton                   | `btn_settings`         | 사용자 정보 수정 화면으로 이동                         |
| 하단 네비게이션                      | LinearLayout/ConstraintLayout | `layout_bottom_nav`    | 공통 네비게이션 포함                                   |

- 상태별 리소스 매핑 기준 (비율 = 현재 사용 가능 금액 / 하루 사용 가능한 금액):

| 상태 단계       | 기준 (남은 비율) | 원형 테두리 | 감정 아이콘 |
| --------------- | ---------------- | ----------- | ----------- |
| 매우 여유       | 80% 이상         | `main1.png` | `feel1.png` |
| 여유/보통       | 30% ~ 79%        | `main2.png` | `feel2.png` |
| 경고(예산 근접) | 0% ~ 29%         | `main3.png` | `feel3.png` |
| 위험(예산 초과) | 0% 미만 (음수)   | `main4.png` | `feel4.png` |

- 화면 진입 시 처리:
  1. 사용자 기본 정보 로드 (이름, 월 수입, 고정 지출, 저축 목표)
  2. `dailyAllowance` 계산
  3. 오늘 날짜의 `todaySpent` 계산
  4. `currentAllowance` 및 상태 단계를 계산하여 UI 갱신  
     (예: 사용 비율에 따라 main1~4 / feel1~4 선택)

- 에러 처리:
  - 사용자 정보가 없으면 (앱 최초 설정 전 상태) Start1 화면으로 강제 이동

---

### 4.5 내역 추가 화면 (Insert)

- 레이아웃 ID: `activity_add_transaction.xml`
- 배경:
  - 전체 배경으로 `background_insert.png` 사용
- 주요 UI 요소:

| 요소            | 타입                         | ID                  | 설명                            |
| --------------- | ---------------------------- | ------------------- | ------------------------------- |
| 탭: 지출        | Toggle/Button                | `btn_tab_expense`   | 선택 시 트랜잭션 타입 = EXPENSE |
| 탭: 수입        | Toggle/Button                | `btn_tab_income`    | 선택 시 트랜잭션 타입 = INCOME  |
| 날짜 입력       | TextView + DatePicker Dialog | `tv_date`           | 기본값: 오늘 날짜               |
| 금액 입력       | EditText (number)            | `et_amount`         | 필수                            |
| 메모 입력(선택) | EditText                     | `et_memo`           | 선택 사항                       |
| 저장 버튼       | ImageButton 또는 Button      | `btn_save`          | 제공된 버튼 스타일              |
| 하단 네비게이션 | 공통                         | `layout_bottom_nav` |                                 |

- 유효성 검사:
  - 금액 필수, 0보다 커야 함
  - 날짜 기본값은 오늘, 사용자가 변경 가능
- 저장 동작:
  - DB에 `Transaction` 레코드 추가
  - 저장 성공 시 토스트: "저장되었습니다."
  - 이전 화면으로 돌아가거나, 홈 화면으로 이동 (정책 결정 필요)

---

### 4.6 캘린더 화면 (Calendar)

- 레이아웃 ID: `activity_calendar.xml`
- 배경:
  - 필요 시 `background_main.png` 또는 단색 배경 사용
- 주요 UI 요소:

| 요소                 | 타입                                 | ID                              | 설명                  |
| -------------------- | ------------------------------------ | ------------------------------- | --------------------- |
| 상단 월 표시         | TextView                             | `tv_month_title`                | 예: "2025년 12월"     |
| 캘린더 뷰            | RecyclerView (Custom)                | `rv_calendar`                   | 커스텀 달력 구현      |
| 일자 셀: 수입합      | TextView                             | (item view 내) `tv_income_sum`  | 해당 날짜의 수입 합계 |
| 일자 셀: 지출합      | TextView                             | (item view 내) `tv_expense_sum` | 해당 날짜의 지출 합계 |
| 일자 셀: 상태 텍스트 | TextView                             | (item view 내) `tv_status`      | "good" 또는 "bad"     |
| 이전 달 버튼         | ImageButton                          | `btn_prev_month`                |                       |
| 다음 달 버튼         | ImageButton                          | `btn_next_month`                |                       |
| 하단 네비게이션      | 공통                                 | `layout_bottom_nav`             |                       |

- 상태 계산 로직:
  - 해당 날짜의 `todaySpent`, 그날의 `dailyAllowance`(월 기준으로 동일) 비교
  - todaySpent ≤ dailyAllowance → "good"
  - todaySpent > dailyAllowance → "bad"

- 날짜 탭 이벤트:
  - 사용자가 날짜를 탭하면, 해당 날짜를 인자로 전달하여 **상세 화면(Detail)** 으로 이동

---

### 4.7 상세 화면 (Detail)

- 레이아웃 ID: `activity_daily_detail.xml`
- 배경:
  - 상단 요약 카드 배경에 `background_detail.png` 사용
- 주요 UI 요소:

| 요소                  | 타입                      | ID                         | 설명                                           |
| --------------------- | ------------------------- | -------------------------- | ---------------------------------------------- |
| 상단 날짜             | TextView                  | `tv_detail_date`           | 예: "2025년 12월 07일"                         |
| 상단 카드             | CardView/ConstraintLayout | `card_daily_summary`       | 목표 달성 여부 메시지                          |
| 요약 문구             | TextView                  | `tv_daily_summary_message` | 예: "이달 목표 하루 1000원, 1000원 절약 성공!" |
| 사용한 금액/절약 금액 | TextView                  | `tv_daily_amount_info`     | `사용한 금액 | {todaySpent}`                   |
| 트랜잭션 리스트       | RecyclerView              | `rv_transactions`          | 해당 날짜의 내역 목록                          |
| 트랜잭션 아이템       | item layout               | `item_transaction`         | 금액, 타입(지출/수입), 메모, 시간 등           |
| 하단 네비게이션       | 공통                      | `layout_bottom_nav`        |                                                |

- 데이터:
  - 인텐트로 전달된 날짜에 해당하는 모든 `Transaction` 조회
  - todaySpent, dailyAllowance 기반으로 메시지 생성

---

## 5. 기능 요구사항 (Functional Requirements)

### FR-1. 사용자 정보 관리

1. 앱 최초 실행 시 사용자 이름, 월 수입, 고정 지출, 저축 목표를 입력받아 저장해야 한다.
2. 저장된 값은 앱 재실행 시에도 유지되어야 한다. (SharedPreferences 또는 로컬 DB)
3. 홈 화면의 설정 버튼을 통해 언제든지 입력된 정보를 수정할 수 있어야 한다.

### FR-2. 매일 사용 가능한 금액 계산

1. 앱은 사용자 정보가 설정되어 있을 때 `dailyAllowance` 를 다음 공식으로 계산해야 한다.  
   \`\`\`
   dailyAllowance = (monthlyIncome - (fixedExpense + savingGoal)) / (해당 월의 실제 일수)
   \`\`\`
   *(예: 12월이면 31로 나눔)*
2. 계산 결과는 정수 단위(원)로 표시하며, 소수점은 버림 또는 반올림 규칙을 명시해야 한다. (기본: 소수점 버림)
3. 홈 화면 상단 및 상세 화면, 캘린더 good/bad 판정에서 이 값을 사용해야 한다.

### FR-3. 소비 내역(트랜잭션) 기록

1. 사용자는 `지출` 또는 `수입` 타입을 선택하여 내역을 추가할 수 있어야 한다.
2. 내역은 최소한 다음 필드를 포함해야 한다.
   - ID (자동 증가)
   - 날짜
   - 타입(지출/수입)
   - 금액
   - 메모(선택)
   - 생성 시각
3. 저장된 내역은 앱 재실행 시에도 유지된다.

### FR-4. 오늘 사용한 금액 및 현재 사용 가능 금액 표시

1. 앱은 매일 날짜 기준으로 `지출 타입`의 내역을 합산하여 `todaySpent` 를 계산해야 한다.
2. `currentAllowance = dailyAllowance - todaySpent` 을 계산하여 홈 화면에 표시한다.
3. 예산은 매일 리셋되며, 전날의 잔액이나 초과분이 오늘 예산에 영향을 주지 않는다.
4. 값이 0 미만이면 0으로 표시할지, 음수 그대로 표시할지 정책을 정의해야 한다. (기본: 음수도 표시)

### FR-5. 캘린더 요약 및 good/bad 상태 표시

1. 캘린더 화면은 선택된 월의 모든 날짜에 대해 다음 정보를 보여줘야 한다.
   - 해당 날짜의 수입 합계
   - 해당 날짜의 지출 합계
   - good/bad 상태
2. good/bad 판정 규칙:
   - todaySpent ≤ dailyAllowance → good
   - todaySpent > dailyAllowance → bad
3. good/bad 상태는 텍스트, 아이콘 색상 등으로 명확히 구분되어야 한다.

### FR-6. 날짜별 상세 내역 조회

1. 사용자가 캘린더에서 날짜를 선택하면 해당 날짜의 상세 화면으로 이동해야 한다.
2. 상세 화면은 그날의:
   - 목표 금액(dailyAllowance)
   - 실제 사용 금액(todaySpent)
   - 절약/초과 금액
   - 개별 트랜잭션 리스트
     를 보여줘야 한다.

### FR-7. 네비게이션

1. 하단 네비게이션 바의 버튼을 통해 항상 홈/내역 추가/캘린더 화면으로 이동할 수 있어야 한다.
2. 물리적 뒤로가기 버튼 동작은 안드로이드 기본 규칙을 따르되, 필요 시 커스텀 처리(예: 홈에서 뒤로가기는 앱 종료)를 정의한다.

---

## 6. 데이터 모델 (초안)

### 6.1 UserProfile

| 필드명        | 타입            | 설명                                  |
| ------------- | --------------- | ------------------------------------- |
| id            | Int             | 단일 사용자라면 1 고정 또는 사용 안함 |
| name          | String          | 사용자 이름                           |
| monthlyIncome | Long            | 월 수입                               |
| fixedExpense  | Long            | 고정 지출                             |
| savingGoal    | Long            | 한달 저축 목표                        |
| createdAt     | Long(timestamp) | 생성 시각                             |

### 6.2 Transaction

| 필드명    | 타입                         | 설명                    |
| --------- | ---------------------------- | ----------------------- |
| id        | Long                         | PK, auto increment      |
| date      | String(YYYY-MM-DD) 또는 Long | 거래 날짜               |
| type      | Enum(String)                 | "INCOME" 또는 "EXPENSE" |
| amount    | Long                         | 금액 (원 단위)          |
| memo      | String?                      | 메모 (null 허용)        |
| createdAt | Long                         | 생성 시각               |

Room DB 예시 엔티티 설계는 구현 단계에서 상세화한다.

---

## 7. 비기능 요구사항 (Non-Functional Requirements)

1. **성능**: 홈 화면 진입 시 오늘 사용 금액 계산이 0.5초 이내에 완료되어야 한다.
2. **로컬 저장소**: 네트워크 없이도 모든 기능(입력/조회)이 동작해야 한다.
3. **안정성**: 잘못된 입력(숫자 아님 등)에 대해 적절한 오류 메시지를 제공하고 앱이 크래시 나지 않아야 한다.
4. **UI 일관성**: 제공된 디자인 이미지와 컬러를 기반으로 화면 간 스타일을 일관되게 유지해야 한다.
5. **확장성**: 추후 통계 화면(주/월 단위 분석), 알림 기능(지출 과다 시 알림) 등을 추가할 수 있도록 계층을 분리한다.

---

## 8. 리소스 및 ID 규칙 (최종 리소스 이름 매핑)

- 모든 PNG 리소스는 `res/drawable` 에 저장한다.
- 실제 사용하는 리소스 이름은 다음과 같다.

### 8.1 배경 관련

| 용도           | 파일명                  |
| -------------- | ----------------------- |
| 홈 화면 배경   | `background_main.png`   |
| 내역 추가 배경 | `background_insert.png` |
| 상세/상단 카드 | `background_detail.png` |

### 8.2 홈 중앙 원형 / 감정 상태

| 요소               | 파일명 세트               |
| ------------------ | ------------------------- |
| 원형 테두리 상태별 | `main1.png` ~ `main4.png` |
| 감정 아이콘 상태별 | `feel1.png` ~ `feel4.png` |

### 8.3 하단 네비게이션 아이콘

| 기능          | 파일명           |
| ------------- | ---------------- |
| 홈            | `bar_home.png`   |
| 소비내역 추가 | `bar_add.png`    |
| 소비내역 보기 | `bar_search.png` |

- 로고 PNG 파일명은 아직 확정되지 않았으므로, 실제 프로젝트에서 정해지는 이름으로 `iv_logo` 에 매핑한다.

---

## 9. 개발 순서 제안 (스펙 기반)

1. 데이터 모델 및 저장소 (UserProfile, Transaction + Room/SharedPreferences)
2. 스플래시(로고) → Start1 → Home 기본 플로우 구현
3. 내역 추가 화면 구현 및 DB 연동
4. 홈 화면에서 todaySpent, currentAllowance 및 상태별 리소스(main1~4, feel1~4) 연동
5. 캘린더 화면에서 일별 합계+good/bad 표시
6. 상세 화면 구현 및 캘린더 연동 (background_detail 적용)
7. 하단 바 이미지 버튼(bar_home / bar_add / bar_search) 적용 및 UI 다듬기
8. 예외 처리, 테스트, 성능 튜닝

---

본 문서는 Money Tree 앱의 1차 스펙이며, 실제 구현 과정에서 세부 항목(에러 메시지 문구, 애니메이션, 다크모드 지원 등)은 추가/수정될 수 있다.